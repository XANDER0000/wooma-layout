.popup
  --popup-bg-color var(--color-white)
  --popup-border-radius rem(24px)
  position relative
  flex 1 0 auto
  flex-direction column
  width 100%
  max-width 100%
  height 100%
  max-height 100%
  padding 0
  background-color transparent
  border 0
  box-shadow none
  &:focus
    outline none
  &::backdrop
    background rgba(31, 41, 20, .2)
    // backdrop-filter blur(2px)
  +desktop()
    flex none
    width rem(800px)
    max-width calc(100% - 1rem)
    height min-content
    // max-height calc(100% - 1rem)

  &.is-open
  &.is-opening
    display flex

  &.is-opening
    animation fadeInZoom .3s forwards
    &::backdrop
      animation fadeIn .3s forwards

  &.is-closing
    animation fadeOutZoom .3s
    &::backdrop
      animation fadeOut .3s

  &__container
    position relative
    z-index 100
    display flex
    flex 0 0 100%
    flex-direction column
    height 100vh
    max-height 100vh
    background-color var(--popup-bg-color)
    +desktop()
      max-height 98vh
      border-radius var(--popup-border-radius)

  &__header
    position relative
    display flex
    flex none
    flex-flow row nowrap
    align-items center
    min-height rem(40px)
    padding rem(24px) 8px rem(24px) 12px
    background-color var(--popup-bg-color)
    border-radius var(--popup-border-radius) var(--popup-border-radius) 0 0
    transition all .3s ease
    +desktop()
      padding rem(40px) rem(40px) rem(24px)

  &__main
    position relative
    display flex
    flex 1 1 auto
    flex-direction column
    gap rem(24px)
    width 100%
    max-width 100%
    padding 0 12px rem(24px)
    overflow-y auto
    background-color var(--color-white)
    custom-scrollbar(6px, transparent, var(--color-dark))
    +desktop()
      display flex
      flex 0 1 auto
      margin 0
      padding 0 rem(40px)
      overflow-y auto
      custom-scrollbar(6px, transparent, var(--color-dark))
      &:last-child
        margin-bottom rem(40px)

  &__footer
    display flex
    flex none
    flex-flow column
    width 100%
    padding rem(12px) 8px rem(12px) 12px
    background-color var(--popup-bg-color)
    +desktop()
      padding rem(24px) rem(40px) rem(40px)
      border-radius 0 0 var(--popup-border-radius) var(--popup-border-radius)

  &__title
    margin 0
    color var(--color-grey-800)
    font-weight 600
    font-size rem(20px)
    font-family $font-family-MA
    line-height 1.3
    +desktop()
      font-size rem(32px)

  &__subtitle
  &__text
    margin 0
    color var(--color-grey-700)
    font-weight 500
    font-size rem(16px)
    line-height 1.4
    p
      &:last-child
        margin-bottom 0

  &__btn-close
    position absolute
    top 12px
    right 12px
    display block
    flex 0 0 auto
    margin 0 0 0 auto
    padding 0
    background-color var(--color-gray)
    border none
    border-radius 100px
    transition all .2s ease
    size 24px
    &::before
    &::after
      position absolute
      top 50%
      left 50%
      display block
      margin-left -6px
      background-color var(--color-dark)
      transition all .2s ease
      content ""
      size 12px 1px
    &::before
      transform rotate(45deg)
    &::after
      transform rotate(-45deg)
    &:hover
    &:focus-visible
      background-color var(--color-dark)
      &::before
      &::after
        background-color var(--color-white)
    +desktop()
      position absolute
      top 10px
      right 10px
      margin 0

  &__buttons
    display flex
    flex-flow row wrap
    gap rem(12px)
    align-items center
    .button
      width 100%
      +above(30em)
        width auto

  // Модификаторы

  &--smallest
    +desktop()
      width rem(400px)

  &--small
    +desktop()
      width rem(460px)

  &--middle
    +desktop()
      width rem(800px)

  &--large
    +desktop()
      width rem(1200px)

  &--largest
    +desktop()
      width rem(1800px)

  &--mob-bottom
    flex 0 0 auto
    justify-content flex-end
    height auto
    max-height 100%

    &.is-opening
      animation fadeInUp .3s forwards
      +desktop()
        animation fadeInZoom .3s forwards

    &.is-closing
      animation fadeOutUp .3s
      +desktop()
        animation fadeOutZoom .3s

    & ^[0]__container
      flex 0 0 auto
      height auto
      border-radius rem(16px) rem(16px) 0 0
      +desktop()
        flex 1 0 auto
        border-radius rem(24px)

    & ^[0]__main
      flex 0 1 auto
      +desktop()
        flex 0 1 auto

    & ^[0]__btn-close
      display none
      +desktop()
        display block

  &--add-number
    & ^[0]__main
      z-index 20
      overflow visible

  &__backdrop
    position fixed
    top 0
    right 0
    bottom 0
    left 0

  &--address
    & ^[0]__container
      +desktop()
        overflow hidden
        border-radius rem(24px)

    & ^[0]__btn-close
      z-index 30

  &--review
    & ^[0]__main .custom-select__items
      max-height 230px

    & ^[0]__reviews-content
      overflow hidden

    & ^[0]__search-filter
      margin-bottom rem(16px)
      +above(48em)
        margin-bottom rem(24px)
