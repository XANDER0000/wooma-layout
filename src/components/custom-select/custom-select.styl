.custom-select
  position relative

  select
    visually-hidden()

  select:disabled + &
    pointer-events none
  select:disabled + & ^[0]__button
    color var(--color-gray)
    background-color var(--color-white)
    border-color var(--color-gray)
    border-color var(--color-grey-400)
    outline none !important
    pointer-events none

  &__button
    position relative
    display flex
    flex-flow row nowrap
    align-items center
    width 100%
    min-height rem(48px)
    padding rem(12px) rem(30px) rem(12px) rem(15px)
    color var(--color-dark-soft)
    font-weight 400
    font-size rem(16px)
    font-family $font-family
    font-variant-numeric lining-nums proportional-nums
    line-height 1
    background-color var(--color-white)
    background-clip padding-box
    border 1px solid var(--color-gray)
    transition all .2s ease
    appearance none
    ellipsis()
    &-img
      position relative
      top 1px
      display inline-block
      width rem(20px)
      margin-right rem(12px)

    &:invalid
      box-shadow none
    &:focus-visible
      border-color var(--color-gray-dark)
    &::placeholder
      color var(--color-gray-dark)
      opacity 1

    &:disabled
      color var(--color-grey-700)
      background-color var(--color-grey-400)
      border-color var(--color-grey-400)
      pointer-events none

    &:-webkit-autofill
      transition background-color 10000000s ease-out

    .is-invalid &
      color var(--color-error)
      border-color var(--color-error)

    ^[0].is-open &
      border-color var(--color-gray-dark)

    // ^[0]--placeholder &
    //   color var(--color-grey-700)


  &__button-caption
    max-width 100%
    transition all .2s ease
    // ellipsis()

  &__button-label
    position absolute
    top 50%
    display none
    max-width 100%
    color var(--color-grey-700)
    font-weight 500
    font-size rem(16px)
    transform translateY(-110%)
    transition all .2s ease
    ellipsis()

  &__button-caption-prefix
    color var(--color-text-light)

  &__button-arrow
    position absolute
    top 50%
    right rem(15px)
    display block
    margin-top -9px
    padding 0
    background-color transparent
    transition all .2s ease
    size 20px
    svg
      fill currentColor
    ^[0].is-open &
      margin-top -12px
      transform scaleY(-1)

  &__dropdown
    position absolute
    top 100%
    left 0
    z-index 100
    display none
    min-width 100%
    margin-top -1px
    padding 0
    overflow hidden
    background-color var(--color-white)
    border 1px solid var(--color-gray-dark)
    ^[0].is-open &
      display block
    ^[0]--top &
      top auto
      bottom 100%
      margin-top 0
      margin-bottom -1px

  &__items
    display block
    max-height 240px
    margin 0
    padding 0
    list-style none
    custom-scrollbar()

  &__item
    display flex
    align-items center
    margin 0
    padding rem(4px) rem(20px)
    color var(--color-gray-dark)
    font-weight 400
    font-size rem(16px)
    font-family $font-family
    font-variant-numeric lining-nums proportional-nums
    line-height 1.5
    cursor pointer
    transition all .2s ease
    &:hover
    &:focus-visible
      color var(--color-white)
      background-color var(--color-dark)
    &.is-placeholder
    &.is-hidden
      display none !important

    &.is-selected
      background-color #ddd
      &:hover
      &:focus-visible
        color var(--color-white)
        background-color var(--color-dark)

    ^[0]--multiple &
      display flex
      flex-flow row nowrap
      align-items flex-start

  &__button-img
  &__item-img
    position relative
    display inline-flex
    flex 0 0 auto
    align-items center
    justify-content center
    width rem(20px)
    height rem(20px)
    margin-right rem(12px)
    img
      display block
      max-width 100%
      height auto
      box-shadow 0px 0px 2px 0 rgba(100,100,100,.3)

  &__search
    display block
    width 100%
    padding 4px
    input
      display block
      width 100%
      padding 12px 10px
      color var(--color-text)
      font-weight 400
      font-size rem(16px)
      font-family $font-family
      line-height 1.5
      background-color var(--color-white)
      background-clip padding-box
      border 1px solid #aaa
      transition all .2s ease
      appearance none
      &:invalid
        box-shadow none
      &:hover
        border-color var(--color-blue-600)
      &:focus-visible
        border-color var(--color-blue-600)
        outline 1px solid var(--color-blue-200)
      &::placeholder
        color var(--color-grey-600)
        opacity 1
      &::placeholder
        color var(--color-grey-600)
        opacity 1

      &:disabled
        color var(--color-grey-600)
        background-color var(--color-grey-100)
        border-color var(--color-grey-400)
        pointer-events none

      &:-webkit-autofill
        // alt solution without boxshadow
        transition background-color 10000000s ease-out

        // alt solution with boxshadow
        // box-shadow inset 0 0 0 1000px #fff
        // -webkit-text-fill-color #000

      .is-invalid &
        color var(--color-error)
        border-color var(--color-error)

  &.hasPlaceholder
    & ^[0]__button
      padding rem(6px) rem(40px) 0 rem(16px)

  // &--placeholder
  //   & ^[0]__button-label
  //     color var(--color-grey-600)
  //     font-size rem(16px)
  //     transform translateY(-50%)
  //   & ^[0]__button-caption
  //     display none
  //     opacity 0

  // &--placeholder
  // &.hasPlaceholder
  //   & ^[0]__button-label
  //     display inline-block

  &--white
    & ^[0]__button
      background-color var(--color-white)
      border-color var(--color-white)
      &:hover
        background-color var(--color-grey-100)
        border-color var(--color-grey-100)
      &:focus-visible
        background-color var(--color-grey-100)
        border-color var(--color-grey-100)
    &.is-open ^[0]__button
      background-color var(--color-white)
      background-color var(--color-grey-100)
      border-color var(--color-blue-400)
